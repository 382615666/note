# 第二周：认识sql并学习数据库的基础操作

### 基础语句
```sql
    // 登录
    mysql -u root -p;
    // 查询数据库
    show databases;
    // 查询当前库的表
    show tables;
    // 查询当前表的列
    show COLUMNS from people;
    // 查询具体的值
    select name from people;
    select * from people;
    // 去重
    select distinct name from people;
    // 限制多少条
    select name from people limit 1;
    // 偏移多少条
    select name from people limit 1 offset 1;
    // 排序
    select name from people order by id desc;
    // 条件查询
    select name from people where id = 4;
    // 模糊查询
    select name from people WHERE name like 'T%';
    select name from people WHERE id BETWEEN 2 and 3;
    select name from people WHERE id = 1 or id = 2;
    select name from people WHERE id = 1 and name like 'T%';
    select name from people WHERE id in (2, 4);
    select name from people WHERE name like 'T%' and not id in (1, 3);
    // 正则匹配
    select name from people WHERE name regexp 'T';
    select name from people WHERE name regexp 'hello[0-9]';
    // 函数
    select CONCAT(name,'(', id, ')') as name from people;
    select id + id as id from people;
    select name from people where year(birth) = '2019' and month(birth) = '5';
    select people_id, count(*) as bookcount from book group by people_id having bookcount >= 2;
    // 子查询
    select name
    from people
    where id in (
    	select people_id
    	from book
    	where name like 'book%'
    )
    // 
    select p.name, b.name from people as p, book as b where p.id = b.people_id;
    select count(*) from (select p.name as pname, b.name from people as p, book as b where p.id = b.people_id) as t;
    // 左右连接
    select * from people as p LEFT OUTER JOIN book as b on p.id = b.people_id;
    select * from people as p right OUTER JOIN book as b on p.id = b.people_id;
    // 并集
    select name from book where people_id = 1 union select name from book where people_id = 2
    insert into people values(null, 'hh', 13)
    insert into people(name, age) values('haha', 18)
    insert into people(name,age) values('haha', 18),('h1h1', 19)
    update people set name = 'heihei', age = 2
    update people set name = 'hei', age = 20 where id = 1
    delete from people where id = 1
    delete from people
    
    create table people (
    	id int(10) not null auto_increment,
    	name varchar(255) null,
    	age int(10) null,
    	primary key (id)
    )
```

### mysql 常用函数

* 字符串
    ```sql
        contact(str1, str2)
        trim(str)
        rtrim(str)
        ltrim(str)
        upper(str)
        left(str)
        length(str)
        lower(str)
        locate(str)
        substring(str)
        // 匹配 发音  类似的字符串
        soundex(str)
    ```
* 日期
    ```sql
        adddate()
        addtime()
        curdate()
        curtime()
        date()
        datediff()
        date_add()
        date_format()
        day()
        dayofweek()
        hour()
        minute()
        month()
        now()
        second()
        time()
        year()
    ```
* 数值处理
    ```sql
        abs()
        cos()
        exp()
        mod()
        pi()
        rand()
        sin()
        sqrt()
        tan()
    ```
* 聚集函数
    ```sql
        avg()
        count()
        max()
        min()
        sum()
    ```
    
### mysql数据引擎:
    * InnoDB
        * 事务引擎，不支持全文搜索
    * MEMORY
        * 功能跟MyISAM相同，数据存在内存，速度快，适合临时表
    * MyISAM
        * 性能极高，支持全文搜索，不支持事务

### 注意事项
* 引擎能混用，外键不能跨引擎
