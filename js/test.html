<!DOCTYPE html>
    <body></body>
    <script>
        function express () {
            const arr = []
            const app = function (req, res) {
                let i = 0
                const next = function () {
                    const f = arr[i++]
                    if (f) {
                        f(req, res, next)
                    }
                }
                next()
            }

            app.use = function (f) {
                arr.push(f)
            }

            return app
        }
        const app = express()
        app.use(function (req, res, next) {
            console.log(111)
            next()
        })
        app.use(function (req, res, next) {
            console.log(222)
            next()
        })
        app()
    </script>
</html>